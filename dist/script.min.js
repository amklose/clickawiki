!function(){angular.module("clickawiki",[])}(),function(){angular.module("clickawiki").constant("constants",{firebaseURL:"https://apiwiki.firebaseio.com",headerTitle:"Clickawiki",defaultDeleteMessage:"Are you sure you want to delete this? ",types:["ArrayList","Boolean","Integer","Double","Number","Object","String","Void"],auth:{email:"admin@admin.com"},popUpDeleteSettings:{title:"Are you sure?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#5cb85c",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},loginPromptSettings:{title:"Login",text:"Please provide your access code:",type:"input",inputType:"password",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputValue:"click",inputPlaceholder:"Acess code..."}})}(),function(){function e(e,t){function n(){}function o(e){return e.unauth()}function a(t){return t===!1?!1:""===t?(swal.showInputError("You need to enter your access code!"),!1):(swal.close(),l(e.getRef(),null,t),void console.log("now loging in with access code: ",t))}function l(e,n,o,a){if(a)e.authWithCustomToken(a,c);else{n=n||t.auth.email;var l={};l.email=n,l.password=o,e.authWithPassword(l,c)}}function c(e,t){e&&(swal("Login Failure",e,"error"),console.log(e))}return{loginPrompt:a,getAuth:n,logout:o,login:l}}angular.module("clickawiki").factory("authFactory",e),e.$inject=["firebaseFactory","constants"]}(),function(){function e(){function e(e){return{name:e}}function t(t,n){t.push(e(n),a)}function n(e,t){e.child(t).remove(a)}function o(e,t,n){console.dir(n),e.child(t).update(n,a)}function a(e){return e?console.log(e):!0}return{addClass:t,removeClass:n,updateClass:o,makeNewClass:e}}angular.module("clickawiki").factory("classFactory",e),e.$inject=[]}(),function(){function e(e){function t(){return o}function n(e){o.set(e,function(e){return e||"complete"})}var o=new Firebase(e.firebaseURL);return{getRef:t,update:n}}angular.module("clickawiki").factory("firebaseFactory",e),e.$inject=["constants"]}(),function(){function e(e){function t(e){return e&&13===e.keyCode?!0:!1}function n(t,n,o){var a=e.popUpDeleteSettings;t=n?e.defaultDeleteMessage+"("+t+")":t,t=t||e.defaultDeleteMessage,a.text=t,swal(a,function(e){console.log(e,o),e?(swal("Deleted!","","success"),o(!0)):(swal("Cancelled","you've stopped it!","error"),o())})}return{checkForEnterPress:t,confirmDelete:n}}angular.module("clickawiki").factory("helperFactory",e),e.$inject=["constants"]}(),function(){function e(){function e(e,t,n){e.child(t).child("methods").push(n,o)}function t(e,t,n){e.child(t).child("methods").child(n).remove(o)}function n(){}function o(e){return e?console.log(e):!0}return{addMethod:e,removeMethod:t,updateMethod:n}}angular.module("clickawiki").factory("methodFactory",e),e.$inject=[]}(),function(){function e(e,t,n,o,a,l,c){function i(e){console.log("Sadfasd"),e.preventDefault(),swal(t.loginPromptSettings,c.loginPrompt)}function r(t){e(function(){console.log("handleDataUpdate() ",t.val()),M.allClasses=t.val()||{}})}function s(e){e&&(o.addClass(T,e),M.newClassName="")}function u(e){function t(t){t&&e&&(o.removeClass(T,e),M.selectedClass=null)}l.confirmDelete("",!1,t)}function d(e){e&&e.val.name.length>0&&o.updateClass(T,e.key,e.val)}function f(e){console.log("Searching for '"+e+"'")}function m(e,t){M.formTitleText="New",M.selectedClass={},M.selectedClass.key=e,M.selectedClass.val=t,M.setEditClassName(!1),F(),angular.element(document).find(".panel-collapse").removeClass("in"),console.log()}function h(e){a.addMethod(T,M.selectedClass.key,e),M.method={},M.method.returnType="Return type",M.displayMethodForm=!1}function p(e){function t(t){t&&a.removeMethod(T,M.selectedClass.key,e)}console.log(e,M.selectedClass),e&&l.confirmDelete("","",t)}function g(e){M.displayMethodForm=!0,M.formTitleText="Edit",M.method=e,console.log(e)}function v(){M.method.attributes=M.method.attributes||[],M.method.attributes.push({})}function y(e,t,n){e.preventDefault(),M.method.attributes&&M.method.attributes.splice(t,1)}function w(e,t,n){return l.checkForEnterPress(e)?n(t):!1}function b(e){return M.editClass=e}function k(){M.displayMethodForm=!M.displayMethodForm}function C(){M.displayMethodForm=!1,M.formTitleText="New",F()}function F(){M.method={},M.method.returnType="Return type",M.method.attributes=[],M.displayMethodForm=!1}var M=this,T=n.getRef();if(M.headerTitle=t.headerTitle,M.returnTypes=t.types,M.formTitleText="New",M.allClasses=[],T.on("value",r),T.onAuth(function(e){console.log("checking auth: ",e),localStorage&&e&&localStorage.setItem("cw_token",e.token)}),localStorage&&localStorage.getItem("cw_token")){var D=localStorage.getItem("cw_token");c.login(T,null,null,D)}M.addNewClass=s,M.removeClass=u,M.updateClass=d,M.selectClass=m,M.search=f,M.addNewMethod=h,M.removeMethod=p,M.updateMethod=g,M.addMethodAttribute=v,M.removeMethodAttribute=y,M.checkForEnter=w,M.setEditClassName=b,M.displayAddNewMethod=k,M.cancelMethodForm=C,M.resetMethodForm=F,M.loginPrompt=i}angular.module("clickawiki").controller("mainController",e),e.$inject=["$timeout","constants","firebaseFactory","classFactory","methodFactory","helperFactory","authFactory"]}(),function(){function e(e){var t=['<nav class="navbar navbar-default">','	<div class="container">','		<div class="navbar-header">','			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1" aria-expanded="false">','				<span class="sr-only">Toggle navigation</span>','				<span class="icon-bar"></span>','				<span class="icon-bar"></span>','				<span class="icon-bar"></span>',"			</button>",'           <a class="navbar-brand navbar-link" href="#">{{vm.headerTitle}}</a>',"		</div>",'		<div class="collapse navbar-collapse" id="navcol-1">','			<form class="navbar-form navbar-left" role="search">','				<div class="form-group">','					<div class="input-group">','						<input type="text" class="form-control" placeholder="Search" ng-model="vm.searchTerm">','						<span class="input-group-btn">','							<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search" aria-hidden="true" ng-click="vm.search(vm.searchTerm)"></span></button>',"						</span>","					</div>","				</div>","			</form>",'			<ul class="nav navbar-nav">','				<li><a href="#" ng-click="vm.loginPrompt($event)">Log In</a></li>','				<li><a href="#">Log Out</a></li>',"			</ul>","		</div>","	</div>","</nav>"].join(""),n={restrict:"EA",transclude:!0},o=null;return o?n.templateUrl=o:n.template=t,n}angular.module("clickawiki").directive("cwHeader",e),e.$inject=["$compile"]}(),function(){function e(){return console.log("in filter"),function(e,t){if(console.log("in filter"),!e)return e;if(!t)return e;var n=(""+t).toLowerCase(),o={};return angular.forEach(e,function(e,t){var a=(""+e).toLowerCase();-1!==a.indexOf(n)&&(o[t]=e)}),o}}angular.module("clickawiki").filter("methodFilter",e)}();