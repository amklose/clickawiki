!function(){angular.module("clickawiki",[])}(),function(){angular.module("clickawiki").constant("constants",{firebaseURL:"https://apiwiki.firebaseio.com",headerTitle:"Clickawiki",defaultDeleteMessage:"Are you sure you want to delete this? ",types:["ArrayList","Boolean","Integer","Double","Number","Object","String","Void"],auth:{email:"admin@admin.com"},popUpDeleteSettings:{title:"Are you sure?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#5cb85c",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},loginPromptSettings:{title:"Login",text:"Please provide your access code:",type:"input",inputType:"password",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputValue:"click",inputPlaceholder:"Acess code..."}})}(),function(){function e(e,t){function o(){}function n(e){return e.unauth()}function a(t){return t===!1?!1:""===t?(swal.showInputError("You need to enter your access code!"),!1):(swal.close(),l(e.getRef(),null,t),void console.log("now loging in with access code: ",t))}function l(e,o,n,a){if(a)e.authWithCustomToken(a,i);else{o=o||t.auth.email;var l={};l.email=o,l.password=n,e.authWithPassword(l,i)}}function i(e,t){e&&(swal("Login Failure",e,"error"),console.log(e))}return{loginPrompt:a,getAuth:o,logout:n,login:l}}angular.module("clickawiki").factory("authFactory",e),e.$inject=["firebaseFactory","constants"]}(),function(){function e(){function e(e){return{name:e}}function t(t,o){t.push(e(o),a)}function o(e,t){e.child(t).remove(a)}function n(e,t,o){console.dir(o),e.child(t).update(o,a)}function a(e){return e?console.log(e):!0}return{addClass:t,removeClass:o,updateClass:n,makeNewClass:e}}angular.module("clickawiki").factory("classFactory",e),e.$inject=[]}(),function(){function e(e){function t(){return n}function o(e){n.set(e,function(e){return e||"complete"})}var n=new Firebase(e.firebaseURL);return{getRef:t,update:o}}angular.module("clickawiki").factory("firebaseFactory",e),e.$inject=["constants"]}(),function(){function e(e){function t(e){return e&&13===e.keyCode?!0:!1}function o(t,o,n){var a=e.popUpDeleteSettings;t=o?e.defaultDeleteMessage+"("+t+")":t,t=t||e.defaultDeleteMessage,a.text=t,swal(a,function(e){console.log(e,n),e?(swal("Deleted!","","success"),n(!0)):(swal("Cancelled","you've stopped it!","error"),n())})}return{checkForEnterPress:t,confirmDelete:o}}angular.module("clickawiki").factory("helperFactory",e),e.$inject=["constants"]}(),function(){function e(){function e(e,t,o){e.child(t).child("methods").push(o,n)}function t(e,t,o){e.child(t).child("methods").child(o).remove(n)}function o(e,t,o,a){console.log(e,t,a),e.child(t).child("methods").child(o).set(a,n)}function n(e){return e?console.log(e):!0}return{addMethod:e,removeMethod:t,updateMethod:o}}angular.module("clickawiki").factory("methodFactory",e),e.$inject=[]}(),function(){function e(e,t,o,n,a,l,i){function c(e){console.log("Sadfasd"),e.preventDefault(),swal(t.loginPromptSettings,i.loginPrompt)}function s(t){e(function(){console.log("handleDataUpdate() ",t.val()),F.allClasses=t.val()||{}})}function r(e){e&&(n.addClass(T,e),F.newClassName="")}function u(e){function t(t){t&&e&&(n.removeClass(T,e),F.selectedClass=null)}l.confirmDelete("",!1,t)}function d(e){e&&e.val.name.length>0&&n.updateClass(T,e.key,e.val)}function f(e){console.log("Searching for '"+e+"'")}function m(e,t){F.formTitleText="New",F.selectedClass={},F.selectedClass.key=e,F.selectedClass.val=t,F.setEditClassName(!1),F.editModeActive=!1,M(),angular.element(document).find(".panel-collapse").removeClass("in"),console.log()}function h(e){console.log("editmode: ",F.editModeActive),F.editModeActive?(F.editModeActive=!1,a.updateMethod(T,F.selectedClass.key,F.editMethodKey,e)):(a.addMethod(T,F.selectedClass.key,e),F.method={},F.method.returnType="Return type"),F.displayMethodForm=!1}function p(e,t){function o(t){t&&a.removeMethod(T,F.selectedClass.key,e)}t.stopPropagation(),console.log(e,F.selectedClass),e&&l.confirmDelete("","",o)}function g(e,t,o){console.dir(t),o.stopPropagation(),F.displayMethodForm=!0,F.formTitleText="Edit",F.method=t,F.editModeActive=!0,F.editMethodKey=e}function v(){F.method.attributes=F.method.attributes||[],F.method.attributes.push({})}function y(e,t,o){e.preventDefault(),F.method.attributes&&F.method.attributes.splice(t,1)}function w(e,t,o){return l.checkForEnterPress(e)?o(t):!1}function k(e){return F.editClass=e}function b(){F.editModeActive=!1,F.formTitleText="New",M(),F.displayMethodForm=!F.displayMethodForm}function C(){F.displayMethodForm=!1,F.formTitleText="New",M()}function M(){F.method={},F.method.returnType="Return type",F.method.attributes=[],F.displayMethodForm=!1}var F=this,T=o.getRef();if(F.headerTitle=t.headerTitle,F.returnTypes=t.types,F.formTitleText="New",F.editModeActive=!1,F.allClasses=[],T.on("value",s),T.onAuth(function(e){console.log("checking auth: ",e),localStorage&&e&&localStorage.setItem("cw_token",e.token)}),localStorage&&localStorage.getItem("cw_token")){var A=localStorage.getItem("cw_token");i.login(T,null,null,A)}F.addNewClass=r,F.removeClass=u,F.updateClass=d,F.selectClass=m,F.search=f,F.addNewMethod=h,F.removeMethod=p,F.updateMethod=g,F.addMethodAttribute=v,F.removeMethodAttribute=y,F.checkForEnter=w,F.setEditClassName=k,F.displayAddNewMethod=b,F.cancelMethodForm=C,F.resetMethodForm=M,F.loginPrompt=c}angular.module("clickawiki").controller("mainController",e),e.$inject=["$timeout","constants","firebaseFactory","classFactory","methodFactory","helperFactory","authFactory"]}(),function(){function e(e){var t=['<nav class="navbar navbar-default">','	<div class="container">','		<div class="navbar-header">','			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1" aria-expanded="false">','				<span class="sr-only">Toggle navigation</span>','				<span class="icon-bar"></span>','				<span class="icon-bar"></span>','				<span class="icon-bar"></span>',"			</button>",'           <a class="navbar-brand navbar-link" href="#">{{vm.headerTitle}}</a>',"		</div>",'		<div class="collapse navbar-collapse" id="navcol-1">','			<form class="navbar-form navbar-left" role="search">','				<div class="form-group">','					<div class="input-group">','						<input type="text" class="form-control" placeholder="Search" ng-model="vm.searchTerm">','						<span class="input-group-btn">','							<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-search" aria-hidden="true" ng-click="vm.search(vm.searchTerm)"></span></button>',"						</span>","					</div>","				</div>","			</form>",'			<ul class="nav navbar-nav">','				<li><a href="#" ng-click="vm.loginPrompt($event)">Log In</a></li>','				<li><a href="#">Log Out</a></li>',"			</ul>","		</div>","	</div>","</nav>"].join(""),o={restrict:"EA",transclude:!0},n=null;return n?o.templateUrl=n:o.template=t,o}angular.module("clickawiki").directive("cwHeader",e),e.$inject=["$compile"]}(),function(){function e(){return console.log("in filter"),function(e,t){if(console.log("in filter"),!e)return e;if(!t)return e;var o=(""+t).toLowerCase(),n={};return angular.forEach(e,function(e,t){var a=(""+e).toLowerCase();-1!==a.indexOf(o)&&(n[t]=e)}),n}}angular.module("clickawiki").filter("methodFilter",e)}();