!function(){angular.module("clickawiki",[])}(),function(){angular.module("clickawiki").constant("constants",{firebaseURL:"https://quicktest1.firebaseio.com/wiki",headerTitle:"Clickawiki",defaultDeleteMessage:"Are you sure you want to delete this? ",types:["ArrayList","Boolean","Integer","Double","Number","Object","String"],auth:{email:"admin@admin.com"},popUpDeleteSettings:{title:"Are you sure?",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#5cb85c",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",closeOnConfirm:!1,closeOnCancel:!1},loginPromptSettings:{title:"Login",text:"Please provide your access code:",type:"input",inputType:"password",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputValue:"click",inputPlaceholder:"Acess code..."}})}(),function(){function e(e,t){function o(){}function n(e){return e.unauth()}function a(t){return t===!1?!1:""===t?(swal.showInputError("You need to enter your access code!"),!1):(swal.close(),l(e.getRef(),null,t),void console.log("now loging in with access code: ",t))}function l(e,o,n,a){if(a)e.authWithCustomToken(a,i);else{o=o||t.auth.email;var l={};l.email=o,l.password=n,e.authWithPassword(l,i)}}function i(e,t){e&&(swal("Login Failure",e,"error"),console.log(e))}return{loginPrompt:a,getAuth:o,logout:n,login:l}}angular.module("clickawiki").factory("authFactory",e),e.$inject=["firebaseFactory","constants"]}(),function(){function e(){function e(e){return{name:e}}function t(t,o){t.push(e(o),a)}function o(e,t){e.child(t).remove(a)}function n(e,t,o){console.dir(o),e.child(t).update(o,a)}function a(e){return e?console.log(e):!0}return{addClass:t,removeClass:o,updateClass:n,makeNewClass:e}}angular.module("clickawiki").factory("classFactory",e),e.$inject=[]}(),function(){function e(e){function t(){return n}function o(e){n.set(e,function(e){return e||"complete"})}var n=new Firebase(e.firebaseURL);return{getRef:t,update:o}}angular.module("clickawiki").factory("firebaseFactory",e),e.$inject=["constants"]}(),function(){function e(e){function t(e){return e&&13===e.keyCode?!0:!1}function o(t,o,n){var a=e.popUpDeleteSettings;t=o?e.defaultDeleteMessage+"("+t+")":t,t=t||e.defaultDeleteMessage,a.text=t,swal(a,function(e){console.log(e,n),e?(swal("Deleted!","","success"),n(!0)):(swal("Cancelled","you've stopped it!","error"),n())})}return{checkForEnterPress:t,confirmDelete:o}}angular.module("clickawiki").factory("helperFactory",e),e.$inject=["constants"]}(),function(){function e(){function e(e,t,o){e.child(t).child("methods").push(o,n)}function t(e,t,o){e.child(t).child("methods").child(o).remove(n)}function o(){}function n(e){return e?console.log(e):!0}return{addMethod:e,removeMethod:t,updateMethod:o}}angular.module("clickawiki").factory("methodFactory",e),e.$inject=[]}(),function(){function e(e,t,o,n,a,l,i){function c(){swal(t.loginPromptSettings,i.loginPrompt)}function r(t){e(function(){console.log("handleDataUpdate() ",t.val()),F.allClasses=t.val()||{}})}function s(e){e&&(n.addClass(M,e),F.newClassName="")}function u(e){function t(t){t&&e&&(n.removeClass(M,e),F.selectedClass=null)}l.confirmDelete("",!1,t)}function d(e){e&&e.val.name.length>0&&n.updateClass(M,e.key,e.val)}function f(e,t){F.formTitleText="New",F.selectedClass={},F.selectedClass.key=e,F.selectedClass.val=t,F.setEditClassName(!1),b()}function m(e){a.addMethod(M,F.selectedClass.key,e),F.method={},F.method.returnType="Return type",F.displayMethodForm=!1}function h(e){function t(t){t&&a.removeMethod(M,F.selectedClass.key,e)}console.log(e,F.selectedClass),e&&l.confirmDelete("","",t)}function p(e){F.displayMethodForm=!0,F.formTitleText="Edit",F.method=e,console.log(e)}function g(){F.method.attributes=F.method.attributes||[],F.method.attributes.push({})}function v(e,t,o){e.preventDefault(),F.method.attributes&&F.method.attributes.splice(t,1)}function y(e,t,o){return l.checkForEnterPress(e)?o(t):!1}function w(e){return F.editClass=e}function k(){F.displayMethodForm=!F.displayMethodForm}function C(){F.displayMethodForm=!1,F.formTitleText="New",b()}function b(){F.method={},F.method.returnType="Return type",F.method.attributes=[],F.displayMethodForm=!1}var F=this,M=o.getRef();if(F.headerTitle=t.headerTitle,F.returnTypes=t.types,F.formTitleText="New",F.allClasses=[],M.on("value",r),M.onAuth(function(e){console.log("checking auth: ",e),localStorage&&e&&localStorage.setItem("cw_token",e.token)}),localStorage.getItem("cw_token")){var T=localStorage.getItem("cw_token");i.login(M,null,null,T)}F.addNewClass=s,F.removeClass=u,F.updateClass=d,F.selectClass=f,F.addNewMethod=m,F.removeMethod=h,F.updateMethod=p,F.addMethodAttribute=g,F.removeMethodAttribute=v,F.checkForEnter=y,F.setEditClassName=w,F.displayAddNewMethod=k,F.cancelMethodForm=C,F.resetMethodForm=b,F.loginPrompt=c}angular.module("clickawiki").controller("mainController",e),e.$inject=["$timeout","constants","firebaseFactory","classFactory","methodFactory","helperFactory","authFactory"]}(),function(){function e(e){var t=['<nav class="navbar navbar-default">','<div class="container">','<div class="navbar-header"><a class="navbar-brand navbar-link" href="#">{{headerTitle}}</a>','<button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"></button>',"</div>",'<div class="collapse navbar-collapse" id="navcol-1"></div>',"</div>","</nav>"].join(""),o={restrict:"EA",template:t,transclude:!0,scope:{headerTitle:"@"}};return o}angular.module("clickawiki").directive("cwHeader",e),e.$inject=["$compile"]}(),function(){function e(){return console.log("in filter"),function(e,t){if(console.log("in filter"),!e)return e;if(!t)return e;var o=(""+t).toLowerCase(),n={};return angular.forEach(e,function(e,t){var a=(""+e).toLowerCase();-1!==a.indexOf(o)&&(n[t]=e)}),n}}angular.module("clickawiki").filter("methodFilter",e)}();